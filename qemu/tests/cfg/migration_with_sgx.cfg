- migration_with_sgx:
    type = migration_with_sgx
    kill_vm = yes
    login_timeout = 240
    mig_timeout = 1200
    auto_cpu_model = "no"
    start_vm = "no"
    cpu_model = "host"
    Linux:
        guest_sgx_check = "dmesg|grep -i 'sgx: EPC section'"
    Windows:
        guest_sgx_check = powershell -command "msinfo32 /report sys_info.txt | Out-Null;Get-Content sys_info.txt | Select-String -Pattern '(SGX)|(Software Guard Extensions)'"
    guest_cmd_check_timeout = 240
    sgx_flags = "sgx sgx1 sgx2 flc"
    use_mem = no
    smp = 6
    mem = 4096
    vcpu_maxcpus = ${smp}
    policy_mem = bind
    mem_devs = "epc0 epc1 epc2 epc3 mem0 mem1"
    backend_mem_epc0 = "memory-backend-epc"
    size_mem_epc0 = 64M
    prealloc_epc0 = on
    host-nodes_epc0 = 0
    backend_mem_epc1 = "memory-backend-epc"
    size_mem_epc1 = 28M
    prealloc_epc1 = on
    host-nodes_epc1 = 1
    backend_mem_epc2 = "memory-backend-epc"
    size_mem_epc2 = 64M
    prealloc_epc2 = off
    host-nodes_epc2 = 0
    backend_mem_epc3 = "memory-backend-epc"
    size_mem_epc3 = 28M
    prealloc_epc3 = off
    host-nodes_epc3 = 1
    backend_mem_mem0 = "memory-backend-ram"
    size_mem0 = 3072M
    host-nodes_mem0 = 0
    backend_mem_mem1 = "memory-backend-ram"
    size_mem1 = 1024M
    host-nodes_mem1 = 1
    monitor_expect_nodes = 2
    guest_numa_nodes = "node0 node1"
    numa_nodeid_node0 = 0
    numa_nodeid_node1 = 1
    numa_memdev_node0 = mem-mem0
    numa_memdev_node1 = mem-mem1
    numa_cpus_node0 = "4,5"
    numa_cpus_node1 = "0,1,2,3"
    vm_sgx_epc_devs = sgx0 sgx1 sgx2 sgx3
    vm_sgx_epc_memdev_sgx0 = epc0
    vm_sgx_epc_node_sgx0 = ${numa_nodeid_node0}
    vm_sgx_epc_memdev_sgx1 = epc1
    vm_sgx_epc_node_sgx1 = ${numa_nodeid_node0}
    vm_sgx_epc_memdev_sgx2 = epc2
    vm_sgx_epc_node_sgx2 = ${numa_nodeid_node1}
    vm_sgx_epc_memdev_sgx3 = epc3
    vm_sgx_epc_node_sgx3 = ${numa_nodeid_node1}
    vm_thread_contexts = "tc0 tc1"
    vm_thread_context_options_tc0 = node-affinity=${vm_sgx_epc_node_sgx0}
    prealloc-context_epc0 = "thread_context-tc0"
    vm_thread_context_options_tc1 = node-affinity=${vm_sgx_epc_node_sgx1}
    prealloc-context_epc1 = "thread_context-tc1"
